<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>센텀 박의 허술한 블로그</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="센텀 박의 부산IT, 소프트웨어, 스타트업, 개발, 음악이야기">
<meta property="og:type" content="website">
<meta property="og:title" content="센텀 박의 허술한 블로그">
<meta property="og:url" content="http://jaydee88.github.io/index.html">
<meta property="og:site_name" content="센텀 박의 허술한 블로그">
<meta property="og:description" content="센텀 박의 부산IT, 소프트웨어, 스타트업, 개발, 음악이야기">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="센텀 박의 허술한 블로그">
<meta name="twitter:description" content="센텀 박의 부산IT, 소프트웨어, 스타트업, 개발, 음악이야기">
  
    <link rel="alternative" href="/atom.xml" title="센텀 박의 허술한 블로그" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">센텀 박의 허술한 블로그</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">console.blog(&quot;Centum Park&#39;s Hustle &amp; Flow&quot;)</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://jaydee88.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Amazon-Dash" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/09/10/Amazon-Dash/" class="article-date">
  <time datetime="2015-09-10T09:35:33.000Z" itemprop="datePublished">2015-09-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Coding/">Coding</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/10/Amazon-Dash/">Amazon Dash</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>오랫만에 포스팅한다. 물론 그 사이에 내 블로그에 올라온 댓글도 없다. ㅜ.ㅜ</p>
<p>요즘 <a href="http://blog.weirdx.io/" target="_blank" rel="external">이상한 모임</a> 슬랙에서 만난 비주류님과 음주를 몇 번 했는데 지난 번에 <a href="https://fresh.amazon.com/dash/" target="_blank" rel="external">아마존 Dash</a>를 5개 정도 구입했다는 이야기를 듣고 하나만 달라고 졸랐다가 어제 만난 자리에서 덥썩 건네 주시더라.(thanks a lot!) 물론 비주류님도 아마존 물품을 구입할려는게 아니라 해킹의 목적으로 구입했고, 물론 나도 당연히?</p>
<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/105007406@N07/21104212810/in/datetaken/" title="Amazon Dash" target="_blank" rel="external"><img src="https://farm6.staticflickr.com/5657/21104212810_5d61f18d16.jpg" width="500" height="376" alt="Amazon Dash"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>
<p>얼마전에 클리앙에 올라온 파이썬 코드로 네트워크 패킷을 캡처해서 활용하는 방법을 그대로 따라 해봤다.</p>
<p>흥미로운 점은 대시 기기에다가 와이파이 패스워드를 어떻게 입력할까? 였는데 스마트폰에 아마존 앱을 설치한 후 대시 디바이스 추가화면에서 스마트폰이 접속된 와이파이 sid의 패스워드를 입력하면 스마트폰의 스피커를 통해서 특정 음을 출력하고 대시에서는 그 음을 마이크센서로 입력받아서 와이파이에 접속하는 방식이였다. 헐헐. 클라우드도 그렇고 사물인터넷 분야에서도 아마존이 제일 무섭다. </p>
<p>구글링 몇 번 해보면 되겠지만 내가 참고한 페이지는 <a href="http://www.appilogue.kr/2844628" target="_blank" rel="external">krazyeom’s epilogue</a>라는 블로그였고, 방법도 그대로 따라 했다. 샘플에서는 특정 서비스를 이용해서 Google Drive문서에 데이터를 기록하는 방식이였는데, 나는 사무실에서 점심시간이나 회의시간이 되었을 경우에 버튼을 눌러서 슬랙의 회사 공통 채널에다가 푸시 메시지를 전송하는 걸로 했다. <a href="https://api.slack.com/incoming-webhooks" target="_blank" rel="external">slack webhook</a>을 이용해서 전송하는 방법이라 다른 방법을 쓰진 않고 기존에 리눅스 터미널에서 curl로 slack에 호출하는 스크립트가 있어서 <code>commands</code>를 import해서 바로 curl 명령어를 실행 하였다. </p>
<p>정확히는 모르지만 비주류님한테 설명을 듣기로는 네트워크 패킷을 캡처하는 방식이라 조금은 늦게 메시지가 가지만 이 정도면 훌륭한 IOT 디바이스라 볼 수 있다. 실제 대시에 포함된 센서 가격을 포함하면 3만원 정도 한다고 들었다. 앞으로도 재미있는 장난감들이 많이 나오길 기대해 본다.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://jaydee88.github.io/2015/09/10/Amazon-Dash/" data-id="ciifllrix002grojcnasoevy8" class="article-share-link">Share</a>
      
        <a href="http://jaydee88.github.io/2015/09/10/Amazon-Dash/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Amazon-Dash/">Amazon Dash</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IOT/">IOT</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Startup-Meetup-in-BUSAN" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/14/Startup-Meetup-in-BUSAN/" class="article-date">
  <time datetime="2015-08-14T08:22:26.000Z" itemprop="datePublished">2015-08-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Startup/">Startup</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/14/Startup-Meetup-in-BUSAN/">Startup Meetup in BUSAN (15년 8월 13일)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>얼마전 포스트에서 <a href="/2015/07/27/Busan-Startup-Cafe/">부산 스타트업 카페 개소소식을</a> 전해 드렸는데 얼마전에 온오프믹스를 통해서 스타트업 미트업이 있다는 이야기를 듣고 다녀왔습니다. </p>
<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/105007406@N07/19939807724/in/datetaken/" title="부산 스타트업 카페" target="_blank" rel="external"><img src="https://farm1.staticflickr.com/750/19939807724_50b835b108.jpg" width="500" height="375" alt="부산 스타트업 카페"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script><br>(부산 부전동 송상현 광장에 위치한 스타트업 카페)</p>
<p>어제 얼마전에 새로 생긴 <a href="busanstartup.kr">부산 스타트업 카페에서</a> <a href="http://appcenter.kr/appcenter" target="_blank" rel="external">(사)앱센터</a>가 주최하는 스타트업 미트업 행사에 다녀 왔다. 행사 프로그램에 대한 내용은 <a href="http://appcenter.kr/archives/8553" target="_blank" rel="external">앱센터 글에</a> 소개되어 있고 연사로 오시는 분중에 유명 스타트업 팟캐스트로 알고 있는 이희우님 빼고는 나머지는 분들은 첨 보는 분들이였다. </p>
<p>후기랄거 까지 없고 간략하게 스타트업 카페와 미트업에 대한 느낌을 정리해 보면 전체적으로 시간이 조금 부족했다는 느낌이 들었다. 평일 저녁 시간이고 연사들이 준비해온 ppt들도 양이 꽤 있다 보니 급하게 마무리되는 경우가 있고 질의응답을 할 시간이 빠져 아쉽웠다. 취재를 온 팀도 있는지 분주하기는 한데 조금은 정신없어 보였다. 그리고 오신 몇몇 분들과 이야기하다 보니 내 예상과는 달리 비IT 스타트업을 하시는 분들이 꽤 있어서 좀 놀라웠다. 요즘 들리는 이야기에 의하면 이런 분들중에서 IT쪽 일을 해보실려는 분들이 꽤 있는 걸로 알고 있다. 여기서 만난 분도 IT쪽은 아닌데 최근에 사물인터넷과 관련한 일을 진행중이라는 이야기를 들었다.</p>
<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/105007406@N07/20608008682/in/datetaken/" title="스타트업 미트업 이희우님" target="_blank" rel="external"><img src="https://farm6.staticflickr.com/5767/20608008682_a7dfaf9cb3.jpg" width="500" height="375" alt="스타트업 미트업 이희우님"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script><br>첫번째 세션을 맡으신 이희우님의 ppt는 SlideShare에 공유되어 있다. </p>
<ul>
<li><a href="http://www.slideshare.net/MatthewLee/case-study-51449865" target="_blank" rel="external">http://www.slideshare.net/MatthewLee/case-study-51449865</a></li>
</ul>
<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/105007406@N07/20430436549/in/datetaken/" title="부산 스타트업 미트업 김진영 대표" target="_blank" rel="external"><img src="https://farm6.staticflickr.com/5767/20430436549_835b56ffed.jpg" width="500" height="375" alt="부산 스타트업 미트업 김진영 대표"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script><br>두번째 세션을 맡은 로아 컨설팅의 김진영 대표의 세션. 비지니스 모델에 대해 한번 더 생각하게 되는 세션이였다. </p>
<p>세번째는 밸브의 신(<a href="http://www.slideshare.net/KyuhoKim/20150122-valve-god)으로" target="_blank" rel="external">http://www.slideshare.net/KyuhoKim/20150122-valve-god)으로</a> 유명한 김규호님. 마지막 세션이였고 말씀도 차분하게 말씀하셨는데 개인적으로 내공이 가득하신 분이라 생각했다. </p>
<p>마지막으로 미트업 처음과 마지막에 광고한 스타트업 위크엔드 부산 소식도 링크로 대신해 본다. 인터넷으로 많이 접했던 행사인데 부산에서도 생긴다니 기대반 걱정반(?)이다.</p>
<p><a href="http://onoffmix.com/event/51006" target="_blank" rel="external">스타트업 위크엔드 in 파라다이스,부산_Startup Weekend[무박3일 창업준비]</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://jaydee88.github.io/2015/08/14/Startup-Meetup-in-BUSAN/" data-id="ciifllrhx001yrojcslk2d1qk" class="article-share-link">Share</a>
      
        <a href="http://jaydee88.github.io/2015/08/14/Startup-Meetup-in-BUSAN/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/busan/">busan</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/startup/">startup</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java-project-automated-deployment-in-jenkins" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/12/java-project-automated-deployment-in-jenkins/" class="article-date">
  <time datetime="2015-08-12T08:11:56.000Z" itemprop="datePublished">2015-08-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Coding/">Coding</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/12/java-project-automated-deployment-in-jenkins/">Jenkins에서 자바 웹 프로젝트 자동 배포</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/images/jenkins_logo.png" alt="Jenkins logo"></p>
<h2 id="들어가기">들어가기</h2><p>개발자로서 커리어를 처음 시작하고 모 은행 SI프로젝트에 가서 처음 주어졌던 일이 허드슨(지금은 이름이 바껴 Jenkins) 배포 관리였다. 현업이나 PL/PM들이 주로 아침에 개발서버와 스테이징 서버를 통해서 변경된 기능에 대해서 확인하고 이슈를 확인하는 식이였다. 문제는 개발자들이 야근하면서 로컬에서 작성한 코드들을 커밋하고 퇴근하면서 다른 컴포넌트의 의존성 문제로 허드슨의 빌드가 깨져서 개발서버 인스턴스가 부팅이 되질 않아 아침에 확인을 못하는 문제가 생겼다. 그래서 나같은 신입 개발자들이 주로 밤 늦게까지 빌드가 정상적으로 동작하는 지 확인하고 문제가 생기는 경우 직접 수정하거나 개발자한테 연락해서 수정을 하는 식으로, 그야말로 몸빵(?)을 했던 추억이 있다. 그 이후로는 CI툴은 거의 써보질 못했고 대부분 형상관리 시스템이나 개발 프레임워크에서 지원하는 식으로 배포에 대한 이슈가 없었다. </p>
<p>최근에 부산에 몇몇 업체에 개발프로젝트 일을 하거나 주위의 이야기를 들어보면 자동 배포는 개나 줘버려라는 식으로 개발자 로컬 PC에서 파일 단위로 FTP를 통해서 개발서버에 배포하는 경우가 대부분이였다. 일단 개발자의 수가 작은 프로젝트라서 배포에 대한 고민이 크질 않거나 프로젝트마다 개발 환경이 달라져서 CI구성을 하기 힘든 경우가 많아지니 CI나 자동배포를 포기하게 되는 원인이질 않을까 추측해 본다. </p>
<p>내 생각에는 혼자 개발하지 않는 이상, 개발 프로젝트에서는 꼭 CI툴을 이용해서 자동배포하는 환경이 꼭 있어야 본다. 첫번째는 비용(개발자가 하나하나씩 배포할 경우에 시간과 노력)적인 문제이고 두번째는 서버에서 빌드된 파일들의 관리 문제이다. 자바 프로젝트의 경우 개발자 로컬 PC에서 컴파일한 클래스파일을 서버에 올리는 문제인데 개발서버가 리눅스고 자바 환경이 Open JDK를 사용하는 경우 크게 문제가 없을 거 같은데 유닉스 환경에서 벤더사의 JDK를 사용할 경우에는 문제가 달라 진다. 벤더 사의 JDK로 컴파일된 바이트 코드가 런타임 환경과 다를 경우 성능 이슈나 나중에 알 수 없는 오류를 접할 가능성이 있다. 그러므로 꼭 자바 웹 프로젝트일 경우 CI툴을 사용해서 자동배포를 꼭 하자. </p>
<h2 id="준비물(환경)">준비물(환경)</h2><p>얼마전에 회사 프로젝트에 배포를 수정한거라 기억이 가물가물하다.</p>
<p>자바 웹 프로젝트이고 프로젝트 루트에 SRC와 WEB(WAS의 도큐먼트 루트와 매칭)이라는 디렉토리가 있고, SRC에 있는 자바 파일을 컴파일되어 개발 서버의 WEB-INF/classes 디렉토리로 배포되어야 한다. 형상관리는 Git을 사용하고 저장소는 Github 유료 플랜으로 비공개 저장소를 사용한다. 개발서버는 데비안 리눅스 버전이고 Open JDK그리고 WAS는 Apache Tomcat이다. Jenkins는 물리적으로 다른 서버에 설치되어 있다. Jenkins 설치 정보는 구글링해 보면 많이 나오니 참고하면 된다.  </p>
<p>배포 시나리오는 Git Branch애 개발자가 개발 커밋을 푸시하면 Github 트리거가 발생해서 Jenkins의 웹훅을 호출하고, Jenkins의 스케줄러잡에서 해당 브랜치가 설정되어 있으면 연결된 Git Branch를 체크아웃 받아서 Gradle로 빌드하고 자바 클래스 파일을 War로 묶어서 개발서버에 배포 한다. 그리고 Jenkins 작업 마지막에 원격으로 개발서버에 접속해서 셸스크립트를 실행해서 개발서버 work directory에서 해당 브랜치의 파일들을 pulling해서 WAS의 document ROOT로 복사하는 식이다. </p>
<p>사실 하고 나면 간단한 내용(실제로도 별 내용이 없다)인데 초보자일 경우 아마 환경적인 부분에서 삽질(X) 헤매는 경우가 있을거라 본다. 이런 부분들이나 지적사항은 댓글 남겨 주면 고맙겠다. </p>
<h2 id="Jenkins_설정">Jenkins 설정</h2><p>1) 젠킨스 Github 플러그인 설치. “Jenkkins 관리”-“플러그인 관리” 화면서 Git/Github 연동 플러그인을 설치 한다. 아래는 실제 설치된 목록이다.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Delivery Pipeline Plugin&#10;Visualisation of Delivery/Build Pipelines, renders pipelines based on upstream/downstream jobs. Full screen view for information radiators.&#10;0.9.5 0.9.4&#10;  &#10;GIT client plugin&#10;Shared library plugin for other Git related Jenkins plugins.&#10;1.18.0  1.17.1&#10;  &#10;GIT plugin&#10;This plugin allows use of Git as a build SCM. A recent Git runtime is required (1.7.9 minimum, 1.8.x recommended). Plugin is only tested on official git client. Use exotic installations at your own risks.&#10;2.4.0 2.3.5&#10;  &#10;GitHub API Plugin&#10;This plugin is a library plugin used by other GitHub related plugins to share the same libraries. This plugin does not have any user visible feature by itself. There&#39;s no need to install this plugin manually, although you want to keep it up to date.&#10;1.69  1.68&#10;  &#10;GitHub plugin&#10;This plugin integrates Jenkins with Github projects.&#10;1.12.0  1.11.3&#10;  &#10;Groovy&#10;This plugin adds the ability to directly execute Groovy code.&#10;1.27  1.25&#10;  &#10;Maven Integration plugin&#10;Jenkins plugin for building Maven 2/3 jobs via a special project type.&#10;2.11  2.10&#10;  &#10;SSH Slaves plugin&#10;This plugin allows you to manage slaves running on \*nix machines over SSH.&#10;1.10  1.9</span><br></pre></td></tr></table></figure>
<p>2) 새로운 스케줄러 잡 등록<br>젠킨스 첫 화면에서 “새로운 Item”을 클릭해서 새로운 스케줄 잡을 등록하자. 사용하는 Jenkins가 한글화되어 있어서 영어 단어와 다를 수 있으니 유의하길 바란다.<br>그리고 스케줄러 잡에는 왠만하면 공백을 넣지 않도록 한다. 잡 이름이 시스템상의 경로가 될 수 있기에 편의상 공백없는 이름을 추천 한다. </p>
<ul>
<li>기본 정보 “Github project”에서 Git Repository 주로 입력</li>
<li>소스코드 관리 항목에서 Git을 선택하고 “Repository URL”과 젠킨스에서 사용할 GitHub 계정을 추가한다. “Branches to build”에서 실제 빌드한 브랜치를 적어 준다. GitFlow를 사용해서 Devel이나 Release브랜치를 기입 한다. </li>
<li>Build항목에서 Invoke Gradle 항목을 선택한다 실행 권한 문제로 Jenkins에서 제공하는 Gradle를 사용했다. “Tasks”는 컴파일 빼곤 다른 게 없어 “build”를 입력하고 “ROOT build script”에서 Gradle 스크립트과 위치한 경로를 기입 한다. </li>
</ul>
<p>레드햇 리눅스에 yum으로 설치된 젠킨스일 경우 아래 경우에는 gradle스크립트를 위치해 놓는다.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/var/lib/jenkins/<span class="built_in">jobs</span>/(Jenkins 스케줄러 이름)/workspace</span><br></pre></td></tr></table></figure>
<p>아주 간단한 Gradle 스크립트다. 빌드에서 class파일을 build/bin으로 타겟디렉토리를 지정 한다. 자바 웹 프로젝트이기 때문에 서블릿 jar파일을 빌드 클래스패스에 추가 했다. </p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">apply plugin: <span class="string">'java'</span></span><br><span class="line">apply plugin: <span class="string">'war'</span></span><br><span class="line">apply plugin: <span class="string">'distribution'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">sourceSets</span> &#123;</span><br><span class="line">    main &#123;</span><br><span class="line">        output.classesDir   = <span class="string">'build/bin'</span></span><br><span class="line">        output.resourcesDir = <span class="string">'build/bin'</span></span><br><span class="line">        java &#123;</span><br><span class="line">            srcDir <span class="string">'src'</span></span><br><span class="line">        &#125;</span><br><span class="line">        resources &#123;</span><br><span class="line">            srcDir <span class="string">'src'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// In this section you declare where to find the dependencies of your project</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    <span class="comment">// Use 'maven central' for resolving your dependencies.</span></span><br><span class="line">    <span class="comment">// You can declare any Maven/Ivy/file repository here.</span></span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// In this section you declare the dependencies for your production and test code</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="comment">// The production code uses the SLF4J logging API at compile time</span></span><br><span class="line">    <span class="keyword">compile</span> <span class="string">'org.slf4j:slf4j-api:1.7.5'</span></span><br><span class="line">    providedCompile <span class="string">'javax.servlet:servlet-api:2.5'</span></span><br><span class="line">    <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'lib'</span>, <span class="keyword">include</span>: <span class="string">'*.jar'</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>다시 Jenkins 스케줄러 화면에서 “빌드 후 조치” 섹션에서 “Send build artifacts over SSH”항목에 개발 서버에 배포할 파일, 여기서는 빌드한 클래스 파일은 build/bin밑에 war파일을 sftp방식으로 배포할려고 한다. 배포한 파일을 ssh로 셸스크립트를 이용해서 archive 해제해서 웹루트에 복사 한다. 항복별로 보면 “Transfers”-“Transfer Set Source files”에서 <code>&quot;**/*.war&quot;,</code>입력했고 exec command 에서 셸스크립트의 경로를 지정했다. 참 SSH Server는 미리 Jenkins 전역 설정 화면에서 미리 추가해 놓아야 한다. 나 같은 경우 Jenkins-&gt;개발서버로 SSH로 접속시에 공개키로 ssh접속이 가능토록 미리 설정해 놓아서 따로 인증 정보를 추가할 필요가 없다. 이런 방식으로 하길 권한다. </li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/home/tomcat/deploy/sh/runapp.sh;</span><br></pre></td></tr></table></figure>
<p>나머지 정보는 환경에 맞도록 입력하고 저장 한다. Jenkins에서 “Build Now”를 선택해서 해당 잡의 Console 로그 화면에서 Git까지 체크아웃하고 Gradle까지 실행되었다면 거의 다 한셈이다. </p>
<p>이젠 빌드후에 개발서버에서 실행된 셸스크립트 파일을 간단하게 만들어 봤다. 위에서 설정한 <code>runapp.sh</code>의 내용이다. Git에서 프로젝트 소스를 체크아웃해서 워크디렉토리를 통해 pulling 받은 소스를 웹루트에 복사하는 스크립트이다. </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="shebang">#!/bin/sh</span></span><br><span class="line"><span class="built_in">cd</span> home/tomcat/webapps/app/ROOT;</span><br><span class="line">jar -xf /home/tomcat/webapps/app/ROOT/build/libs/workspace.war</span><br><span class="line">rm -rf /home/tomcat/webapps/app/ROOT/build/;</span><br><span class="line"><span class="comment"># 워킹 디렉토리에서 Git pulling</span></span><br><span class="line"><span class="built_in">cd</span> /home/tomcat/deploy/(프로젝트 체크아웃 디렉토리)/web;</span><br><span class="line">git checkout develop;</span><br><span class="line">git pull;</span><br><span class="line"><span class="comment"># 웹루트로 카피</span></span><br><span class="line">cp -rf /home/tomcat/deploy/(프로젝트 체크아웃 디렉토리)/web/* /home/tomcat/webapps/app/ROOT/;</span><br><span class="line"><span class="comment"># tomcat 컨테이너 재기동</span></span><br><span class="line">/home/tomcat/tomcat7/bin/shutdown.sh;</span><br><span class="line">/home/tomcat/tomcat7/bin/startup.sh;</span><br><span class="line"><span class="comment"># 슬랙 웹훅으로 빌드 성공 메시지를 전송하면 더 좋다. </span></span><br><span class="line">curl -X POST --data-urlencode <span class="string">'payload=&#123;"channel": "#server_room", "username": "bot", "text": ":ok_hand::ok_hand:deploy complete.", "icon_emoji": ":ok_hand:"&#125;'</span> (웹훅 URL) &gt; /dev/null <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>다시 Jenkins로 돌아와서 “Build Now”로 빌드를 실행해서 결과를 확인 한다. </p>
<h2 id="Github_설정">Github 설정</h2><p>브랜치에 push이벤트가 발생하면 위 Jenkins가 빌드 잡을 실행하도록 서비스 훅 설정이 필요하다. 해당 리파지터리 “Settings”메뉴에서 “Webhooks &amp; Services”메뉴를 선택하고 아래 “Service” 항목에서 Jenkins 정보를 추가 하자. </p>
<p><img src="/images/github_conf.png" alt="Github hook service"></p>
<p>Github설정까지 끝났으면 브랜치에 소스를 push해서 Jenkins스케줄러 잡이 동작하는 지 확인 해본다. push시에 Jenkins가 동작하지 않는다면 웹 훅 설정이 잘 못된 것이므로 다시 확인해 본다.</p>
<p>사실 내용에 나온 Gradle도 잘 모르는 상태고 Jenkins 설정도 오랫만에 보는거라 삽질을 좀(사실 꽤) 했다. 정리한 내용이 다음 삽질자(?)에게 도움이 되었으면 좋겠다. </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://jaydee88.github.io/2015/08/12/java-project-automated-deployment-in-jenkins/" data-id="ciifllrg1000xrojc8h732n3r" class="article-share-link">Share</a>
      
        <a href="http://jaydee88.github.io/2015/08/12/java-project-automated-deployment-in-jenkins/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/automated-deployment/">automated deployment</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ci/">ci</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jenkins/">jenkins</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-disqus-comment-widget" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/03/disqus-comment-widget/" class="article-date">
  <time datetime="2015-08-03T09:02:39.000Z" itemprop="datePublished">2015-08-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Coding/">Coding</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/03/disqus-comment-widget/">Hexo Disqus 위젯 추가</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>블로그에 <a href="http://jaydee88.github.io/2015/07/31/view-markdown-file-in-terminal/#comment-2171328557">첫 댓글 등록 기념으로</a> 블로그 사이드바에 최신 댓글 불러오는 위젯을 추가 했다. 물론 그래봤자 불러올 댓글이 하나밖에 없다. -_ -;</p>
<p><a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>에서는 disqus 코멘트를 기본으로 지원하는데 내가 사용하는 테마(landscape, 기본 테마)에서는 최신 댓글을 보여주는 위젯이 없어서 만들어야 했다. </p>
<ul>
<li><code>/blog/themes/landscape/layout/_widget/</code>    경로에 <code>comment.ejs</code>를 만들고 아래의 내용을 넣었다.</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"widget-wrap"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">h3</span> <span class="attribute">class</span>=<span class="value">"widget-title dsq-widget"</span>&gt;</span>Recent Comments<span class="tag">&lt;/<span class="title">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"widget"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"http://본인disqus숏네임.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_mods=0&amp;hide_avatars=0&amp;avatar_size=32&amp;excerpt_length=50"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>disqus의 스크립트를 불러올 때 파라미터로 설정을 변경할 수 있는데 아래와 같다. </p>
<ul>
<li>num_item : 불러올 댓글 개수. 기본 5개</li>
<li>hide_mods : 1(true)로 할 경우 수정자(?)의 코멘트가 안 보인다고 한다. 요건 애매하네.</li>
<li>excerpt_length : 보여줄 코멘트의 문자 길이. </li>
<li>hide_avatars : 1(true)로 설정할 경우 댓글 등록한 사용자의 disqus아바타가 안 보인다. </li>
</ul>
<p>그리고 테마의 설정파일(<code>/blog/themes/landscape/_config.yml</code>)의 사이드바 위젯 <code>comment</code>라고 추가해주면 끝. </p>
<p>쓰고 나니 별 내용이 없구나. 음..</p>
<p><img src="/images/1411482120.jpg" alt="민망"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://jaydee88.github.io/2015/08/03/disqus-comment-widget/" data-id="ciifllrh5001erojcsp1cp9k7" class="article-share-link">Share</a>
      
        <a href="http://jaydee88.github.io/2015/08/03/disqus-comment-widget/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/disqus/">disqus</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-simple-node-js-script-for-download-tumblr-likes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/02/simple-node-js-script-for-download-tumblr-likes/" class="article-date">
  <time datetime="2015-08-01T19:14:57.000Z" itemprop="datePublished">2015-08-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Coding/">Coding</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/02/simple-node-js-script-for-download-tumblr-likes/">node.js로 like한 tumblr 사진, 동영상 백업</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>맥에서 내가 ‘like’한 텀블러 포스트의 이미지와 동영상만 백업하고 싶은데 구글링해보면 윈도우 프로그램이 몇 있거나, 전체를 백업하는 용도로만 있는 거 같다. 그래서 간단한 node.js로 간단한 스크립트를 만들었다. 개인적으로 node.js를 공부한 지 얼마 안되었으므로 태클달기 있귀업귀.</p>
<ol>
<li>tumblr의 rest api를 엑세스하기 위해서는 토큰이 필요한 데 먼저 <a href="https://www.tumblr.com/oauth/apps" target="_blank" rel="external">여기에 가서</a> 새로운 앱을 등록해야 한다. 나는 백업 사이트를 유령 앱을 만들었다. </li>
<li>consumer_key, consumer_secret, token, token_secret 4개의 키가 필요한데 token과 token_secet는 텀블러 <a href="https://api.tumblr.com/console/calls/blog/likes" target="_blank" rel="external">api 콘솔 메뉴</a>에서 확인할 수 있었다. </li>
</ol>
<ul>
<li>텀블러 api node.js 랩퍼 모듈 : <a href="https://github.com/tumblr/tumblr.js/" target="_blank" rel="external">https://github.com/tumblr/tumblr.js/</a></li>
<li>디렉토리 생성(mkdirp)과 파일 다운로드(wget) 2가지 노드 모듈을 설치했다. npm으로 설치해야 한다.</li>
</ul>
<p>아래는 간단한 다운로드 스크립트다. </p>
<script src="https://gist.github.com/anonymous/54f421ea0e4535c3eb0f.js"></script>

<p>일단 졸려서 다운 받은 데이터만 확인하고 끝. </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://jaydee88.github.io/2015/08/02/simple-node-js-script-for-download-tumblr-likes/" data-id="ciifllrfd000projci1xqyjcl" class="article-share-link">Share</a>
      
        <a href="http://jaydee88.github.io/2015/08/02/simple-node-js-script-for-download-tumblr-likes/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/backup/">backup</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tumblr/">tumblr</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Coding/">Coding</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Startup/">Startup</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Amazon-Dash/">Amazon Dash</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centum-Park/">Centum Park</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ESENS/">ESENS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IOT/">IOT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automated-deployment/">automated deployment</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backup/">backup</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/busan/">busan</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ci/">ci</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/disqus/">disqus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/editor/">editor</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fullstack-framework/">fullstack framework</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/getting-started/">getting started</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jenkins/">jenkins</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/login/">login</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/passport-js/">passport.js</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sails-js/">sails.js</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/soundcloud/">soundcloud</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spf13/">spf13</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/startup/">startup</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/startup-news/">startup news</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/terminal/">terminal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tip/">tip</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tumblr/">tumblr</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Amazon-Dash/" style="font-size: 10px;">Amazon Dash</a> <a href="/tags/Centum-Park/" style="font-size: 10px;">Centum Park</a> <a href="/tags/ESENS/" style="font-size: 10px;">ESENS</a> <a href="/tags/IOT/" style="font-size: 10px;">IOT</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/automated-deployment/" style="font-size: 10px;">automated deployment</a> <a href="/tags/backup/" style="font-size: 10px;">backup</a> <a href="/tags/blog/" style="font-size: 20px;">blog</a> <a href="/tags/busan/" style="font-size: 20px;">busan</a> <a href="/tags/ci/" style="font-size: 10px;">ci</a> <a href="/tags/disqus/" style="font-size: 10px;">disqus</a> <a href="/tags/editor/" style="font-size: 10px;">editor</a> <a href="/tags/fullstack-framework/" style="font-size: 10px;">fullstack framework</a> <a href="/tags/getting-started/" style="font-size: 10px;">getting started</a> <a href="/tags/hexo/" style="font-size: 20px;">hexo</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/jenkins/" style="font-size: 10px;">jenkins</a> <a href="/tags/login/" style="font-size: 10px;">login</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/passport-js/" style="font-size: 10px;">passport.js</a> <a href="/tags/sails-js/" style="font-size: 20px;">sails.js</a> <a href="/tags/soundcloud/" style="font-size: 10px;">soundcloud</a> <a href="/tags/spf13/" style="font-size: 10px;">spf13</a> <a href="/tags/startup/" style="font-size: 10px;">startup</a> <a href="/tags/startup-news/" style="font-size: 10px;">startup news</a> <a href="/tags/terminal/" style="font-size: 10px;">terminal</a> <a href="/tags/tip/" style="font-size: 10px;">tip</a> <a href="/tags/tumblr/" style="font-size: 10px;">tumblr</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">7</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/09/10/Amazon-Dash/">Amazon Dash</a>
          </li>
        
          <li>
            <a href="/2015/08/14/Startup-Meetup-in-BUSAN/">Startup Meetup in BUSAN (15년 8월 13일)</a>
          </li>
        
          <li>
            <a href="/2015/08/12/java-project-automated-deployment-in-jenkins/">Jenkins에서 자바 웹 프로젝트 자동 배포</a>
          </li>
        
          <li>
            <a href="/2015/08/03/disqus-comment-widget/">Hexo Disqus 위젯 추가</a>
          </li>
        
          <li>
            <a href="/2015/08/02/simple-node-js-script-for-download-tumblr-likes/">node.js로 like한 tumblr 사진, 동영상 백업</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Centum Park<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'jaydee88';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>